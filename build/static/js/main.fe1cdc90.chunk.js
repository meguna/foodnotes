(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){},193:function(e){e.exports={actions:{add:"Add a new Recipe",edit:"Edit",delete:"Delete",submit:"submit"},list:{update:"last updated",create:"last added",name:"name",load:"Load More...",loading:"Loading..."},header:{account:"Account",logout:"Log Out",login:"Log In",signup:"Sign Up"},recipe:{ing:"ingredients","ing-single":"ingredient",notes:"notes",images:"images"},message:{noselected:"Use the button above to add a new recipe, or select one to play with from the sidebar."},account:{title:"Account Settings",name:"name",email:"email",password:"password",language:"language",change:"Change",reset:"Reset Password",emailchange:"Change your email address",namechange:"Change your name",langchange:"Choose a language"},error:{general:"Oops! Something went wrong. Try again!"},recipeform:{title:"Edit Recipe",info:"info",name:"name",required:"required",size:"size",sizeDesc:"use this field creatively - for anything from serving count to baking tray dimensions",notes:"notes",ing:"ingredients",ingName:"ingredient name",ingAmt:"amount",ingNotes:"notes",ingGroupDesc:"if you'd like to elaborate more on this group, use these fields! \nfor example, you might have groups called 'batter mix' or 'dry ingredients.'",grpName:"name",grpNotes:"notes",addIngGroup:"add another ingredient group",images:"images",imgDesc:"attach any images you have of your recipe!\nmax image size: 2mb.\nmax number of images: 5.",updateButton:"Update Recipe!"},newrecipe:{title:"Add A New Recipe",submit:"Add this recipe!",fail:"Oops! There was an error adding your recipe. Please try again!",success:"The recipe was added successfully!"},editrecipe:{title:"Edit Recipe",submit:"Update recipe!",fail:"Oops! There was an error updating your recipe. Please try again!",success:"The recipe was updated successfully!"},imgupload:{filename:"One or more of your files has a filename that exceeds the character limit of {{length}} and could not be uploaded.",filecount:"You selected over five files. Only the first five will be uploaded.",filesize:"One or more of your files exceeds the maximum size. Please choose a different file.",loading:"Your image(s) are being uploaded.",success:"Your images have been successfully uploaded.",fail:"Your images could not be uploaded. Please try again.",remove:"Remove this image"},delete:{title:"Delete Recipe",success:"Successfully deleted recipe.",fail:"Failed to delete recipe. Please try again later.",confirm:"You are about to delete this recipe. Are you sure?",yes:"Yes, I am sure.",cancel:"cancel"},welcome:{"app-name":"Foodnotes","big-title":"Experimenting in the kitchen has never been better.","big-desc":"Designed with serious cooking and baking enthusiasts in mind,\nFoodnotes is a free recipe manager that helps you build complex\nrecipes then track and search them.",scroll:"scroll to read more",features:"Features","complex-title":"Complex Recipes","complex-desc":"Easily build complex recipes with the ability to group and label ingredients, add pictures, and edit frequently.","mobile-title":"Mobile Friendly","mobile-desc":"View, share, or update your recipes on-the-go with our mobile friendly UI.","ss-title":"Sort & Search","ss-desc":"Sort, categorize, and search through your recipes like you've never done before!",screenshots:"Screenshots","view-title":"Viewing a Recipe","view-desc":"","edit-title":"Editing a Recipe","edit-desc":"",github:"View this project on github",cp:"Copyright \xa9 2019 Meguna"}}},194:function(e){e.exports={actions:{add:"\u65b0\u3057\u3044\u30ec\u30b7\u30d4\u3092\u8ffd\u52a0",edit:"\u7de8\u96c6",delete:"\u524a\u9664",submit:"\u9001\u4fe1\u3059\u308b"},list:{update:"\u66f4\u65b0\u65e5\u4ed8\u9806",create:"\u4f5c\u6210\u65e5\u4ed8\u9806",name:"\u540d\u524d\u9806",load:"\u3055\u3089\u306b\u8aad\u307f\u8fbc\u3080",loading:"\u8aad\u307f\u8fbc\u307f\u4e2d"},header:{account:"\u30a2\u30ab\u30a6\u30f3\u30c8",logout:"\u30ed\u30b0\u30a2\u30a6\u30c8",login:"\u30ed\u30b0\u30a4\u30f3",signup:"\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210"},recipe:{ing:"\u6750\u6599","ing-single":"\u6750\u6599",notes:"\u30e1\u30e2",images:"\u5199\u771f"},message:{noselected:"\u5de6\u5074\u304b\u3089\u30ec\u30b7\u30d4\u3092\u9078\u3076\u304b\u3001\u4e0a\u306e\u30dc\u30bf\u30f3\u3067\u8ffd\u52a0\u3057\u3066\u307f\u3066\uff01"},account:{title:"\u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a",name:"\u540d\u524d",email:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",password:"\u30d1\u30b9\u30ef\u30fc\u30c9",language:"\u8a00\u8a9e",change:"\u66f4\u65b0",reset:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u3048\u308b",emailchange:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u5909\u66f4",namechange:"\u540d\u524d\u5909\u66f4",langchange:"\u8a00\u8a9e\u9078\u629e"},error:{general:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3002"},recipeform:{title:"\u30ec\u30b7\u30d4\u3092\u7de8\u96c6",info:"\u30ec\u30b7\u30d4\u60c5\u5831",name:"\u30ec\u30b7\u30d4\u540d",required:" \u5fc5\u9808",size:"\u5927\u304d\u3055\u30fb\u91cf",sizeDesc:"\u30b1\u30fc\u30ad\u578b\u306e\u5927\u304d\u3055\u3084\u4f55\u4eba\u524d\u304b\u306a\u3069\u3092\u8a18\u9332\u3059\u308b\u9805\u76ee\u3067\u3059\u3002",notes:"\u30e1\u30e2",ing:"\u6750\u6599",ingName:"\u6750\u6599\u540d",ingAmt:"\u91cf",ingNotes:"\u30e1\u30e2",ingGroupDesc:"\u3053\u306e\u6750\u6599\u3089\u306b\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u3064\u3051\u308b\u3084\u30e1\u30e2\u3092\u8a18\u9332\u3067\u304d\u308b\u9805\u76ee\u3067\u3059\u3002",grpName:"\u30b0\u30eb\u30fc\u30d7\u540d",grpNotes:"\u30e1\u30e2",addIngGroup:"\u6750\u6599\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3059\u308b",images:"\u5199\u771f",imgDesc:"\u5199\u771f\u306f5\u679a\u307e\u3067\u6dfb\u4ed8\u3067\u304d\u307e\u3059\u3002\uff11\u679a\u306b\u3064\u304d\uff12\u30e1\u30ac\u30d0\u30a4\u30c8\u307e\u3067\u3068\u306a\u308a\u307e\u3059\u3002",updateButton:"\u9001\u4fe1\u3059\u308b"},newrecipe:{title:"\u65b0\u3057\u3044\u30ec\u30b7\u30d4\u3092\u8ffd\u52a0",submit:"\u9001\u4fe1\u3059\u308b",fail:"\u30ec\u30b7\u30d4\u3092\u9001\u4fe1\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002",success:"\u30ec\u30b7\u30d4\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002"},editrecipe:{title:"\u30ec\u30b7\u30d4\u3092\u66f4\u65b0",submit:"\u9001\u4fe1\u3059\u308b",fail:"\u30ec\u30b7\u30d4\u3092\u66f4\u65b0\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002",success:"\u30ec\u30b7\u30d4\u304c\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\u3002"},imgupload:{filename:"\u9078\u629e\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u3046\u3061\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u304c{{length}}\u5b57\u3092\u3053\u3059\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u7533\u3057\u8a33\u306a\u3044\u3067\u3059\u304c\u3001\u3053\u3061\u3089\u308f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u307e\u305b\u3093\u3002\u9078\u3073\u306a\u304a\u3057\u3066\u304f\u3060\u3055\u3044\u3002",filecount:"{{count}}\u500b\u4ee5\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u9078\u629e\u3055\u308c\u305f\u305f\u3081\u3001\u6700\u521d\u306e{{count}}\u679a\u306e\u307f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002",filesize:"\u9078\u629e\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u3046\u3061\u3001\u91cd\u3055\u304c{{size}}\u30e1\u30ac\u30d0\u30a4\u30c8\u4ee5\u4e0a\u306e\u3082\u306e\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u7533\u3057\u8a33\u306a\u3044\u3067\u3059\u304c\u3001\u3053\u3061\u3089\u308f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u307e\u305b\u3093\u3002\u9078\u3073\u306a\u304a\u3057\u3066\u304f\u3060\u3055\u3044\u3002",loading:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u4e2d\u3067\u3059",success:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3057\u305f\u3002",fail:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u7533\u3057\u8a33\u306a\u3044\u3067\u3059\u304c\u3001\u3082\u3046\u4e00\u5ea6\u3084\u308a\u76f4\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002",remove:"\u3053\u306e\u5199\u771f\u3092\u524a\u9664\u3059\u308b"},delete:{title:"\u524a\u9664",success:"\u30ec\u30b7\u30d4\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002",fail:"\u30ec\u30b7\u30d4\u306e\u524a\u9664\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002",confirm:"\u3053\u306e\u30ec\u30b7\u30d4\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u304a\u9593\u9055\u3048\u306a\u3044\u3067\u3059\u304b\uff1f",yes:"\u306f\u3044\u3001\u524a\u9664\u3057\u307e\u3059",cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb"},welcome:{"app-name":"\u30ec\u30b7\u30d4\u306e\u6728","big-title":"\u81ea\u5206\u597d\u307f\u306b\u30ec\u30b7\u30d4\u306f\u9032\u5316\u3057\u7d9a\u3051\u308b\uff01","big-desc":"\u30ec\u30b7\u30d4\u81ea\u4f53\u306b\u30e1\u30e2\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u4f5c\u308a\u65b9\u307e\u3067\u308f\u304b\u308b\u3063\u3066\u697d\u3058\u3083\u306a\u3044\uff1f\u4f5c\u3063\u305f\u5f8c\u3001\u611f\u60f3\u3084\u6b21\u56de\u3078\u306e\u30a2\u30c9\u30d0\u30a4\u30b9\u3068\u304b\u30e1\u30e2\u3057\u3068\u304d\u305f\u304f\u306a\u3044\uff1f\u5bb6\u65cf\u306e\u5473\u3092\u30b7\u30a7\u30a2\u3057\u307e\u305b\u3093\u304b\uff1f\u305d\u3093\u306a\u3042\u308c\u3053\u308c\u3067\u304d\u307e\u3059\uff01",scroll:"\u3082\u3063\u3068\u8aad\u3080",features:"\u6a5f\u80fd","complex-title":"\u81ea\u7531\u306b\u7de8\u96c6","complex-desc":"","mobile-title":"\u30b9\u30de\u30db\u3067\u30e9\u30af\u30e9\u30af\u64cd\u4f5c","mobile-desc":"","ss-title":"\u7c21\u5358\u691c\u7d22\u30fb\u4e26\u3079\u66ff\u3048","ss-desc":"",screenshots:"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8","view-title":"\u30ec\u30b7\u30d4\u8a73\u7d30\u753b\u9762","view-desc":"","edit-title":"\u30ec\u30b7\u30d4\u66f4\u65b0\u753b\u9762","edit-desc":"",github:"\u30ae\u30c3\u30c8\u30cf\u30d6\u3067\u898b\u308b",cp:"\u30b3\u30d4\u30fc\u30e9\u30a4\u30c8 \xa9 2019 \u30e1\u30b0\u30ca"}}},197:function(e,t,a){e.exports=a(674)},202:function(e,t,a){},390:function(e,t,a){},44:function(e){e.exports={domain:"dev-jknyt6s8.auth0.com",clientId:"7T5TkRWNMBtfhsSRJM5oli1yKog3DVXt",apiAudience:"api.meguna.co/moodforfood",rootUri:"http://mff.meguna.co:3000"}},664:function(e,t,a){},665:function(e,t,a){},666:function(e,t,a){},667:function(e,t,a){},668:function(e,t,a){},669:function(e,t,a){},670:function(e,t,a){},671:function(e,t,a){},672:function(e,t,a){},673:function(e,t,a){},674:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(62),r=a.n(i),c=(a(202),a(13)),s=a(65),l=a(189),u=a(3),m=a(4),d=a(74),p=a(130),g=a.n(p),h=a(134),f=a(8),b=a(193),v=a(194);h.a.use(f.a).init({fallbackLng:"en",lng:"en",debug:!1,interpolation:{escapeValue:!1},resources:{en:{common:b},ja:{common:v}}});var E=h.a,O=a(44),y=new(function(){function e(){Object(u.a)(this,e),this.auth0=new d.default.WebAuth({domain:O.domain,audience:O.apiAudience,clientID:O.clientId,redirectUri:O.rootUri,responseType:"id_token token",scope:"openid profile email user_metadata",responseMode:"web_message"}),this.getProfile=this.getProfile.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this)}return Object(m.a)(e,[{key:"getProfile",value:function(){return this.profile}},{key:"getIdToken",value:function(){return this.idToken}},{key:"getToken",value:function(){var e=this;return new Promise(function(t,a){void 0!==e.accessToken&&e.isAuthenticated()?t(e.accessToken):e.silentAuth().then(function(e){t(e.accessToken)}).catch(function(e){a(e)})})}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt}},{key:"signIn",value:function(){return this.lockJs({allowSignUp:!1,initialScreen:"login"})}},{key:"signUp",value:function(){return this.lockJs({allowLogin:!1,initialScreen:"signUp",allowShowPassword:!0,additionalSignUpFields:[{name:"name",placeholder:"your name"},{type:"hidden",name:"nickname",value:E.language}]})}},{key:"resetPassword",value:function(e){return this.lockJs({allowLogin:!1,allowSignUp:!1,initialScreen:"forgotPassword",closable:!0,prefill:{email:e}})}},{key:"lockJs",value:function(e){var t=this;if(null===sessionStorage.getItem("stateid")){var a=Math.floor(1e5*Math.random());sessionStorage.setItem("stateid",a)}var n={language:E.language||"en",closable:!1,autoclose:!0,avatar:null,allowedConnections:["Username-Password-Authentication"],loginAfterSignUp:!0,usernameStyle:"email",theme:{primaryColor:"#FF320C"},languageDictionary:{title:"Log In to Foodnotes"},auth:{redirect:!0,redirectUrl:O.rootUri,params:{state:sessionStorage.getItem("stateid")}}},o=Object.assign(n,e),i=new g.a(O.clientId,O.domain,o);return i.show(),new Promise(function(e,a){i.on("authenticated",function(n){n.state!==sessionStorage.getItem("stateid")?a(new Error("state mismatch error")):(t.setSession(n),sessionStorage.removeItem("stateid"),i.getUserInfo(n.accessToken,function(t,n){t&&a(t),e(n),i.hide()}))}),i.on("unrecoverable_error",function(e){i.show({flashMessage:{type:"error",text:e.errorDescription}}),console.error(e),a(e)}),i.on("authorization_error",function(e){i.show({flashMessage:{type:"error",text:e.errorDescription}}),console.error(e),a(e)})})}},{key:"handleAuthentication",value:function(){var e=this;return new Promise(function(t,a){e.auth0.parseHash(function(n,o){return n?a(n):o&&o.idToken?(e.setSession(o),t()):a(n)})})}},{key:"silentAuth",value:function(){var e=this;return new Promise(function(t,a){e.auth0.checkSession({},function(n,o){if(!n)return e.setSession(o),t(o);a(n)})})}},{key:"patchUserData",value:function(e){var t=this;return new Promise(function(a,n){t.auth0.checkSession({audience:"https://dev-jknyt6s8.auth0.com/api/v2/",scope:"read:current_user update:current_user_identities create:current_user_metadata update:current_user_metadata delete:current_user_metadata create:current_user_device_credentials delete:current_user_device_credentials"},function(o,i){o&&(console.error(o),n(o));var r=new d.default.Management({domain:"dev-jknyt6s8.auth0.com",token:i.accessToken});r.patchUserMetadata(t.profile.sub,e,function(e,n){return e&&console.error(e),n.user_metadata.name&&(t.profile.name=n.user_metadata.name),n.user_metadata.email&&(t.profile.email=n.user_metadata.email),a(r)})})})}},{key:"setSession",value:function(e){this.idToken=e.idToken,this.accessToken=e.accessToken,this.profile=e.idTokenPayload,this.expiresAt=1e3*e.idTokenPayload.exp}},{key:"signOut",value:function(){this.idToken=null,this.profile=null,this.expiresAt=null,this.auth0.logout({returnTo:O.rootUri,clientID:O.clientId})}}]),e}()),j=a(195),w=function(e,t){return new Promise(function(a,n){y.getToken().then(function(o){var i={Authorization:"Bearer ".concat(o)};t&&t.headers&&(i=Object.assign({},i,t.headers));var r={headers:i};t&&(r=Object.assign({},t,{headers:i})),fetch("".concat("http://localhost:3010/api").concat(e),r).then(function(e){if(!e.ok)throw new Error(e.statusText);return e}).then(function(e){return e.json()}).then(function(e){return a(e)}).catch(function(e){"login_required"!==e.code&&(console.error(e),n(e))})}).catch(function(e){"login_required"!==e.code&&(console.error(e),n(e))})})},S=new(a.n(j).a)("Mood for Food",5),k=function(e){return function(t){t(function(e){return{type:"FETCH_RECIPES_START",payload:e}}(e)),w("/getrecipes/sort=".concat(e)).then(function(e){return t({type:"FETCH_RECIPES_SUCCESS",payload:e})}).catch(function(e){return t({type:"FETCH_RECIPES_FAILURE",payload:e})})}},N=function(){return{type:"FETCH_MORE_RECIPES_START"}},C=function(e){return function(t){t(function(e){return{type:"SET_SELECTED_RECIPE",payload:e}}(e))}},I=function(e,t){return function(a){a(function(e,t){return{type:"SET_NOTIFICATION_DETAILS",payloadMessage:t,payloadStatus:e}}(e,t))}},_=function(e){return{type:"LOGIN_SUCCESS",payload:e}},M=function(e){return{type:"LOGIN_FAILURE",payload:e}},R=function(){return function(e){e({type:"AUTH_START"}),y.signIn().then(function(t){e(_(t))}).catch(function(e){M(e)})}},A=a(6),F=a(5),x=a(11),T=a(7),P=(a(390),a(15)),D=a(50),U=a(10),L={name:"",amount:"",notes:"",groupId:1,elemId:0},z={name:"",notes:"",groupId:1,elemId:0},G=function(e){var t=e.ingredient,a=[t.amount];if(t.amount){var n=t.amount.split(/~~(\w+)~~/);n.length>1&&(a=n=n.map(function(e,t){return t%2===1?o.a.createElement("span",{key:t,className:"strikethrough"},e):e}))}return o.a.createElement("p",{key:t.id,className:"recipe-info-ingredients-item"},t.name,t.amount&&o.a.createElement("span",null,"\xa0 \u2014 \xa0",a,"\xa0",t.amount_unit),o.a.createElement("span",{className:"recipe-info-ingredient-note"},t.notes))};G.defaultProps={ingredient:Object(U.a)({},L)};var H=G,B=function(e){for(var t=e.ingredients,a=e.groups,i=e.groupCount,r=(e.screen,Object(f.b)().t),c=[],s=function(e){c.push(t.filter(function(t){return t.groupId===e}))},l=1;l<i+1;l++)s(l);var u="";return 0!==t.length&&i>1&&(u="recipe-info-ing-list-group"),o.a.createElement(n.Fragment,null,o.a.createElement("p",{className:"recipe-info-label"},r("common:recipe.ing")),0===t.length&&o.a.createElement("p",{className:"form-description"},"Looks like this recipe doesn't have any ingredients yet.",o.a.createElement("br",null),"Use the Edit Recipe button to add some!"),o.a.createElement("div",{className:"recipe-info-ing-list"},c.map(function(e,t){return o.a.createElement("div",{className:"recipe-group-wrapper",key:a[t].groupId},o.a.createElement("div",{className:"".concat(u," ").concat(a[t].notes||a[t].name?"half-width-ig":"full-width-ig")},o.a.createElement("div",{className:"recipe-info-ing-item-parent"},e.map(function(e,t){return o.a.createElement(H,{ingredient:e,key:t})}))),(a[t].notes||a[t].name)&&o.a.createElement("div",{className:"recipe-group-info-box"},a[t].name&&o.a.createElement("p",{className:"recipe-info-group-name"},a[t].name),a[t].notes&&o.a.createElement("p",{className:"recipe-info-group-note"},a[t].notes)))})))};B.defaultProps={ingredients:[],groups:[{}],groupCount:null};var Q=B,q=function(e){var t=e.notes,a=Object(f.b)().t;return o.a.createElement(n.Fragment,null,t&&o.a.createElement("p",{className:"recipe-info-label"},a("common:recipe.notes")),o.a.createElement("p",{className:"recipe-info-notes"},t))};q.defaultProps={notes:""};var V=o.a.memo(q),W=function(e){var t=e.size;return o.a.createElement(n.Fragment,null,t&&o.a.createElement("p",{className:"recipe-info-serves"},t))};W.defaultProps={size:""};var J=o.a.memo(W),K=a(20),X=o.a.memo(function(){var e=Object(f.b)().t;return o.a.createElement("div",{className:"ri-top-buttons"},o.a.createElement(P.b,{to:"/addRecipe"},o.a.createElement(K.Plus,null),"\xa0",e("common:actions.add")))}),Y=o.a.memo(function(e){var t=e.id,a=Object(f.b)().t;return o.a.createElement("div",{className:"ri-top-buttons"},o.a.createElement(P.b,{to:"/editRecipe/".concat(t)},o.a.createElement(K.Edit,null),"\xa0",a("common:actions.edit")))}),$=o.a.memo(function(e){var t=e.id,a=Object(f.b)().t;return o.a.createElement("div",{className:"ri-top-buttons"},o.a.createElement(P.b,{to:"/deleteRecipe/".concat(t)},o.a.createElement(K.Trash2,null),"\xa0",a("common:actions.delete")))}),Z=function(e){var t=e.images,a=e.name,i=Object(f.b)().t;return o.a.createElement(n.Fragment,null,0!==t.length&&o.a.createElement("p",{className:"recipe-info-label"},i("common:recipe.images")),t.map(function(e){return e?o.a.createElement("div",{className:"form-image-wrapper",key:e.elemId},o.a.createElement("img",{className:"ri-image",src:"/api/static/".concat(e.imagePath),alt:a})):null}))};Z.defaultProps={images:[],name:""};var ee=Z,te=(a(664),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).state={ingredients:[],groups:[],groupCount:1,images:[],info:[],loadingInfo:!0,fetchError:!1},a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.setSelectedRecipe,n=e.selectedId,o=e.history,i=e.loadingAuth,r=+S.decode(t.params.id);n!==r&&a(r),i||-1!==n&&this.fetchRecipeInfo(),t.params.id||-1!==n||o.push("/")}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.loadingAuth,o=a.selectedId;if(e.loadingAuth===n&&e.selectedId===o||n||-1!==o&&this.fetchRecipeInfo(),e.error||t.fetchError)throw Error()}},{key:"fetchRecipeInfo",value:function(){var e=this,t=this.props.selectedId;w("/getrecipeinfo/".concat(t)).then(function(t){var a=t.groups;0===a.length&&(a=[Object(U.a)({},z)]),e.setState({groups:a,ingredients:t.ingredients,images:t.images,groupCount:a.length,info:t.info,loadingInfo:!1,fetchError:!1})}).catch(function(t){console.error(t),e.setState({fetchError:!0})})}},{key:"render",value:function(){var e=this.props,t=e.selectedId,a=e.error,i=e.screen,r=this.state,c=r.loadingInfo,s=r.groups,l=r.groupCount,u=r.ingredients,m=r.images,d=r.info,p=r.fetchError;if(a||p)return null;var g=S.encode(t);return o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"ri-action-buttons"},"mobile"!==i&&o.a.createElement(X,null),o.a.createElement(Y,{id:g}),o.a.createElement($,{id:g})),o.a.createElement("p",{className:"recipe-info-name"},d.name),o.a.createElement(J,{size:d.size}),!c&&o.a.createElement(n.Fragment,null,o.a.createElement(Q,{ingredients:u,groups:s,groupCount:l,screen:i}),o.a.createElement(V,{notes:d.notes}),o.a.createElement(ee,{images:m,name:d.name,screen:i})))}}]),t}(n.Component));te.defaultProps={error:!1};var ae=Object(D.g)(te),ne={setSelectedRecipe:C},oe=Object(c.b)(function(e){return e},ne)(ae),ie=(a(665),o.a.memo(function(e){var t=e.onAction,a=e.loading,n=e.loadingAuth,i=Object(f.b)().t,r=i("common:list.load"),c="",s=t;return(n||a)&&(r=i("common:list.loading"),c="default-cursor",s=null),o.a.createElement("button",{type:"button",role:"link",tabIndex:"0",onClick:s,onKeyDown:s,className:"housekeeping-message load-more-button ".concat(c)},r)})),re=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).state={sortMethod:"update_date",searchMode:!1,sQuery:""},a.onSortSelect=a.onSortSelect.bind(Object(x.a)(a)),a.onSearchChange=a.onSearchChange.bind(Object(x.a)(a)),a.onLoadMore=a.onLoadMore.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(){if(this.props.error)throw Error()}},{key:"onRecipeClick",value:function(e){var t=this.props,a=t.selectedId,n=t.setSelectedRecipe;e!==a&&n(e)}},{key:"onSortSelect",value:function(e){var t=this,a=this.props,n=a.fetchRecipes,o=a.fetchQuickSearch;this.setState({sortMethod:e.target.value},function(){var e=t.state,a=e.sortMethod,i=e.searchMode,r=e.sQuery;i?o(r,a):n(a)})}},{key:"onSearchChange",value:function(e){var t=this.props,a=t.sortMethod,n=t.fetchRecipes,o=t.fetchQuickSearch,i=e.target.value;this.setState({sQuery:i}),""!==i?(this.setState({searchMode:!0}),o(i,a)):(this.setState({searchMode:!1}),n(a))}},{key:"onLoadMore",value:function(){var e=this.state,t=e.searchMode,a=e.sortMethod,n=e.sQuery,o=this.props,i=o.fetchMoreRecipes,r=o.fetchQuickSearch,c=o.listOffset,s=o.recipes;t?r(n,a,s.length):i(c,a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.recipes,n=t.selectedId,i=t.loading,r=t.error,c=t.loadingAuth,s=t.t,l=t.noMoreResults,u=this.state,m=u.sortMethod,d=u.sQuery;return o.a.createElement("div",null,o.a.createElement("form",null,o.a.createElement("input",{type:"text",placeholder:"quick search",className:"quick-search-field",value:d,onChange:this.onSearchChange})),o.a.createElement("form",null,o.a.createElement("select",{value:m,onChange:this.onSortSelect},o.a.createElement("option",{value:"name"},s("common:list.name")),o.a.createElement("option",{value:"update_date"},s("common:list.update")),o.a.createElement("option",{value:"create_date"},s("common:list.create")))),(!i||!r)&&a.map(function(t){var a=S.encode(t.id);return o.a.createElement("div",{key:t.id},o.a.createElement(P.b,{role:"link",to:"/recipe/".concat(a),tabIndex:"0",onClick:function(){return e.onRecipeClick(t.id)},onKeyDown:function(){return e.onRecipeClick(t.id)},className:"recipe-list-item-wrapper"},o.a.createElement("p",{className:t.id===n?"selected":""},t.name)))}),!l&&o.a.createElement(ie,{onAction:this.onLoadMore,loading:i,loadingAuth:c}))}}]),t}(n.Component);re.defaultProps={recipes:[],error:!1,loading:!1,selectedId:1,listOffset:0};var ce=Object(f.c)()(re),se={fetchRecipes:k,setSelectedRecipe:C,fetchMoreRecipes:function(e,t){return function(a){a(N),w("/getrecipes/offset=".concat(e,"-sort=").concat(t)).then(function(e){return a({type:"FETCH_MORE_RECIPES_SUCCESS",payload:e})}).catch(function(e){return a({type:"FETCH_MORE_RECIPES_FAILURE",payload:e})})}},fetchQuickSearch:function(e,t,a){return function(n){var o=a||"";n(function(e){return{type:"FETCH_QS_START",payload:e}}(t)),w("/quicksearch/".concat(e,"/").concat(t,"/").concat(o)).then(function(e){n(a?function(e){return{type:"FETCH_MORE_QS_SUCCESS",payload:e}}(e):{type:"FETCH_QS_SUCCESS",payload:e})}).catch(function(e){return n({type:"FETCH_QS_FAILURE",payload:e})})}}},le=Object(c.b)(function(e){return e},se)(ce),ue=a(22),me=a(43),de=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){var t=this.props,a=t.name,n=t.onChange;n&&n(a,e.target.value)}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.className,n=e.labelClassName,i=e.value,r=e.id,c=e.textarea,s=e.invalid,l=e.validString,u=e.onBlur,m=e.outerClassName,d=e.required,p=e.info,g=e.labelname,h=e.t,f=c?"textarea":"input",b=s?" invalid":"";return o.a.createElement("div",{className:m},o.a.createElement("label",{htmlFor:r,className:"".concat(n," field-label")},g||t,d&&o.a.createElement("span",{className:"required-label"},h("common:recipeform.required"))),p&&o.a.createElement("p",{className:"form-description"},p),o.a.createElement(f,{placeholder:g||t,className:"".concat(a).concat(b," rf-input"),id:r,type:"text",value:i||"",onChange:this.handleChange,onBlur:u}),s&&o.a.createElement("p",{className:"error-msg"},o.a.createElement(K.AlertCircle,null)," ".concat(l)))}}]),t}(n.PureComponent);de.defaultProps={onBlur:function(){},className:"",labelClassName:"",value:"",id:"",name:"",textarea:!1,invalid:!1,validString:"",labelname:"",outerClassName:"form-group",info:"",required:!1};var pe=Object(c.b)(function(e){return e})(Object(f.c)()(de)),ge=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleNameChange=a.handleNameChange.bind(Object(x.a)(a)),a.handleAmtChange=a.handleAmtChange.bind(Object(x.a)(a)),a.handleNotesChange=a.handleNotesChange.bind(Object(x.a)(a)),a.handleFocus=a.handleFocus.bind(Object(x.a)(a)),a.handleBlur=a.handleBlur.bind(Object(x.a)(a)),a.removeFields=a.removeFields.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"handleNameChange",value:function(e){e.preventDefault();var t=this.props,a=t.onChange,n=t.ingId;a&&a("name",n,e.target.value)}},{key:"handleAmtChange",value:function(e){e.preventDefault();var t=this.props,a=t.onChange,n=t.ingId;a&&a("amount",n,e.target.value)}},{key:"handleNotesChange",value:function(e){e.preventDefault();var t=this.props,a=t.onChange,n=t.ingId;a&&a("notes",n,e.target.value)}},{key:"handleFocus",value:function(e){e.preventDefault();var t=this.props,a=t.onFocus,n=t.ingId;a&&a(n)}},{key:"handleBlur",value:function(e){e.preventDefault();var t=this.props,a=t.onBlur,n=t.ingId;a&&a(n)}},{key:"removeFields",value:function(e){e.preventDefault();var t=this.props,a=t.onRemoveSelected,n=t.ingId;a&&a(n)}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.ingId,n=e.groupId,i=e.t,r=e.screen;return o.a.createElement("div",{className:"new-ing-fields form-group"},o.a.createElement("input",{placeholder:i("common:recipeform.ingName"),className:"new-ing-field-left field-label ing-field",id:"nr-ing-name-input",type:"text",value:t.name||"",onFocus:this.handleFocus,onChange:this.handleNameChange}),o.a.createElement("input",{placeholder:i("common:recipeform.ingAmt"),className:"new-ing-field-ctr field-label ing-field",id:"nr-ing-amount-input",type:"text",value:t.amount||"",onChange:this.handleAmtChange}),o.a.createElement("input",{placeholder:i("common:recipeform.ingNotes"),className:"new-ing-field-right field-label ing-field",id:"nr-ing-notes-input",type:"text",value:t.notes||"",onChange:this.handleNotesChange,onBlur:this.handleBlur}),!(0===a&&1===n)&&o.a.createElement("button",{type:"button",onClick:this.removeFields,onKeyDown:this.removeFields,tabIndex:"-1"},"mobile"!==r&&o.a.createElement(K.X,null),"mobile"===r&&o.a.createElement("p",{className:"rem-ing-link"},"remove this ingredient")))}}]),t}(n.Component);ge.defaultProps={value:Object(U.a)({},L),ingId:0,groupId:1};var he=Object(f.c)()(ge),fe=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).onIngFieldChange=function(e,t,n){var o=a.state,i=o.ingredients,r=o.groupInfo,c=a.props,s=c.onIngGroupUpdate,l=c.groupId;i[t][e]=n,a.setState({ingredients:i});var u=JSON.parse(JSON.stringify(i));s&&s(u,l,r)},a.onFieldChange=function(e,t){a.setState(function(a){return{groupInfo:Object(U.a)({},a.groupInfo,Object(me.a)({},e,t))}},function(){var e=a.props,t=e.onIngGroupUpdate,n=e.groupId,o=a.state,i=o.ingredients,r=o.groupInfo;t&&t(i,n,r)})},a.addIngField=function(e){var t=a.state.ingredients,n=a.props.groupId;e===t.length-1&&a.setState(function(e){return{ingredients:[].concat(Object(ue.a)(e.ingredients),[{name:"",amount:"",notes:"",groupId:n}])}})},a.removeEmptyIngField=function(e){var t=a.state.ingredients;t.length>1&&""===t[e].name&&""===t[e].amount&&""===t[e].notes&&a.setState(function(e){var t=Object(ue.a)(e.ingredients);return t.pop(),{ingredients:t}})},a.removeSelectedIngField=function(e){var t=a.props,n=t.onRemoveGroup,o=t.onIngGroupUpdate,i=t.groupId;a.setState(function(t){var a=Object(ue.a)(t.ingredients);return a.splice(e,1),{ingredients:a}},function(){var e=a.state,t=e.ingredients,r=e.groupInfo;0===t.length?n(i):o(t,i,r)})},a.onIngFieldChange=a.onIngFieldChange.bind(Object(x.a)(a)),a.addIngField=a.addIngField.bind(Object(x.a)(a)),a.onFieldChange=a.onFieldChange.bind(Object(x.a)(a));var n=e.ingredients,o=e.group;return a.state={ingredients:n,groupInfo:Object(U.a)({},o)},a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.ingredients,a=e.groupInfo,i=this.props,r=i.groupId,c=i.t,s=i.screen;if(0===t.length)return null;for(var l=[],u=0;u<t.length;u++)l.push(o.a.createElement(n.Fragment,{key:u},"mobile"===s&&o.a.createElement("p",{className:"ing-num-label"},c("common:recipe.ing-single"),"\xa0",u+1),o.a.createElement(he,{onChange:this.onIngFieldChange,value:t[u],ingId:u,groupId:r,onFocus:this.addIngField,onBlur:this.removeEmptyIngField,onRemoveSelected:this.removeSelectedIngField,screen:s})));return o.a.createElement("div",{className:"ingredient-group"},l,o.a.createElement("div",{className:"form-group-buttons"},o.a.createElement("p",{className:"form-description"},c("common:recipeform.ingGroupDesc")),o.a.createElement("div",{className:"ing-group-fields"},o.a.createElement(pe,{labelname:c("common:recipeform.grpName"),name:"name",className:"ing-group-info igi-name",outerClassName:"no-pad",onChange:this.onFieldChange,value:a.name}),o.a.createElement(pe,{labelname:c("common:recipeform.grpNotes"),name:"notes",className:"ing-group-info igi-notes",outerClassName:"no-pad",onChange:this.onFieldChange,value:a.notes}))))}}]),t}(n.Component);fe.defaultProps={groupId:1,ingredients:[L],group:Object(U.a)({},z)};var be=Object(f.c)()(fe),ve=function(){var e=Object(f.b)().t;return o.a.createElement("div",{className:"new-ing-fields form-group ing-field-labels"},o.a.createElement("label",{className:"new-ing-field-left field-label",htmlFor:"nr-ing-name-input"},e("common:recipeform.ingName")),o.a.createElement("label",{className:"new-ing-field-ctr field-label",htmlFor:"nr-ing-amount-input"},e("common:recipeform.ingAmt")),o.a.createElement("label",{className:"new-ing-field-right field-label",htmlFor:"nr-ing-notes-input"},e("common:recipeform.ingNotes")))},Ee=function(e){function t(){return Object(u.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.status,a=e.message,i=e.hiddenClass,r="";return"success"===t?r="notification-green":"fail"===t?r="notification-yellow":"warn"===t&&(r="notification-yellow"),o.a.createElement(n.Fragment,null,""!==t&&o.a.createElement("div",{className:"notification ".concat(r," ").concat(i)},"success"===t&&o.a.createElement(K.Check,null),("fail"===t||"warn"===t)&&o.a.createElement(K.AlertCircle,null),"load"===t&&o.a.createElement(K.Edit3,null)," ".concat(a)))}}]),t}(n.Component);Ee.defaultProps={status:"",message:""};var Oe=Ee,ye=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).state={isHidden:!1},a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.decay&&(this.timeout=setTimeout(function(){e.setState({isHidden:!0})},1e4))}},{key:"componentWillUnmount",value:function(){this.props.decay&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.message,i=this.state.isHidden,r=i?"hidden":"not-hidden";return o.a.createElement(n.Fragment,null,!i&&o.a.createElement(Oe,{status:t,message:a,hiddenClass:r}))}}]),t}(n.Component);ye.defaultProps={status:"",message:"",decay:!0};var je=ye,we=2097152,Se=5,ke=237,Ne=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).onImageChosen=function(e){e.preventDefault(),e.stopPropagation();var t=a.props,n=t.onDone,o=t.imageCount,i=t.t,r=new FormData,c=!1;Array.from(e.target.files).forEach(function(t,n){t.name.length>ke&&(c=!0,a.setState({status:"fail",statusMessage:i("common:imgupload.filename",{length:ke})})),n>=Se-o?a.setState({warn:"warn",warnMessage:i("common:imgupload.filecount",{count:Se})}):t.size>we?(c=!0,a.setState({status:"fail",statusMessage:i("common:imgupload.filesize",{size:2})})):r.append("file",e.target.files[n])}),c||a.setState({status:"load",statusMessage:i("common:imgupload.loading")},function(){w("/addimage",{method:"POST",body:r}).then(function(e){a.setState({status:"success",statusMessage:i("common:imgupload.success")}),console.log(e),n&&n(e),console.log(e)}).catch(function(e){a.setState({status:"fail",statusMessage:i("common:imgupload.fail")}),console.error(e)})})},a.state={status:"",statusMessage:"",warn:"",warnMessage:""},a.onImageChosen=a.onImageChosen.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.status,a=e.statusMessage,n=e.warn,i=e.warnMessage,r=this.props.t;return o.a.createElement("div",{className:"form-group"},o.a.createElement("p",{className:"form-description"},r("common:recipeform.imgDesc")),o.a.createElement("label",{htmlFor:"recipe-image-upload",className:"hidden"},"Image Upload"),o.a.createElement("input",{id:"recipe-image-upload",type:"file",accept:"image/*",onChange:this.onImageChosen,value:"",multiple:!0}),o.a.createElement(je,{status:n,message:i}),o.a.createElement(je,{status:t,message:a}))}}]),t}(n.Component),Ce=Object(f.c)()(Ne),Ie=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).onImageUpload=function(e){var t=a.props.onImageStateUpdate,n=a.state.images,o=[],i=1;0!==n.length&&(i=n[n.length-1].elemId+1),e.forEach(function(e){o.push({imagePath:e,elemId:i}),i++}),a.setState(function(e){return{images:[].concat(Object(ue.a)(e.images),o)}},function(){var e=a.state.images;t(e)})},a.onImageDelete=function(e,t){var n=a.state.images,o=a.props.onImageStateUpdate,i=n.filter(function(t){return t.elemId!==e});a.setState({images:i},function(){o(i)}),w("/deleteImageWithPath/".concat(t),{method:"DELETE"}).catch(function(e){console.error(e)})};var n=a.props.images;return a.state={images:n},a.onImageDelete=a.onImageDelete.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state.images,a=this.props,i=a.name,r=a.t,c=t.length;return o.a.createElement(n.Fragment,null,o.a.createElement(Ce,{onDone:this.onImageUpload,imageCount:c}),t.map(function(t,a){return t?o.a.createElement("div",{className:"form-image-wrapper",key:t.elemId},o.a.createElement("img",{className:"recipe-form-image",src:"/api/static/".concat(t.imagePath),alt:"".concat(i,"-").concat(a)}),o.a.createElement("input",{className:"close-image-button",type:"button",data:t.elemId,onClick:function(){e.onImageDelete(t.elemId,t.imagePath)},value:r("common:imgupload.remove")})):null}))}}]),t}(n.Component);Ie.defaultProps={images:[],name:""};var _e=Object(f.c)()(Ie),Me=function(e){var t=e.subtitle;return o.a.createElement(n.Fragment,null,o.a.createElement("hr",null),o.a.createElement("h2",{className:"subtitle"},t))};Me.defaultProps={subtitle:""};var Re=o.a.memo(Me),Ae=(a(666),function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).onFieldChange=function(e,t){a.setState(Object(me.a)({},e,t)),a.validate()},a.onAddGroup=function(){a.setState(function(e){return{groups:[].concat(Object(ue.a)(e.groups),[Object(U.a)({},z,{groupId:e.groups.length+1,elemId:e.groups[e.groups.length-1].elemId+1})]),ingredients:[].concat(Object(ue.a)(e.ingredients),[[Object(U.a)({},L,{groupId:e.groups.length+1})]])}})},a.onRemoveGroup=function(e){var t=e-1,n=a.state,o=n.ingredients,i=n.groups,r=[].concat(Object(ue.a)(o.slice(0,t)),Object(ue.a)(o.slice(t+1))),c=[].concat(Object(ue.a)(i.slice(0,t)),Object(ue.a)(i.slice(t+1))),s=r.map(function(e,t){for(var a=[],n=0;n<e.length;n++)a.push(Object(U.a)({},e[n],{groupId:t+1}));return a}),l=c.map(function(e,t){return Object(U.a)({},e,{groupId:t+1})});a.setState({ingredients:s,groups:l})},a.onIngGroupUpdate=function(e,t,n){var o=e.filter(function(e){return!(""===e.name&&""===e.amount&&""===e.notes)});a.setState(function(e){return{ingredients:Object.assign([],e.ingredients,Object(me.a)({},t-1,o)),groups:Object.assign([],e.groups,Object(me.a)({},t-1,Object(U.a)({groupId:t},n)))}})},a.updateImageState=function(e){a.setState({images:e})},a.validate=function(){return""===a.state.name?(a.setState(function(e){return{invalid:Object(U.a)({},e.invalid,{name:!0})}}),!0):(a.setState(function(e){return{invalid:Object(U.a)({},e.invalid,{name:!1})}}),!1)},a.onSubmit=function(e){var t;e.preventDefault();var n=a.state,o=n.ingredients,i=n.groups,r=n.name,c=n.notes,s=n.size,l=n.images,u=n.stateOnSubmit,m=a.props,d=m.fetchUrl,p=m.setNotification,g=m.messages,h=m.fetchRecipes,f=m.sortMethod,b=m.selectedId,v=m.setSelectedRecipe,E=m.history;if(a.validate())a.setState({submitError:!0});else{var O=(t=[]).concat.apply(t,Object(ue.a)(o)).filter(function(e){return!(""===e.name&&""===e.amount&&""===e.notes)}),y=0===O.length?[]:i;w(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,notes:c,size:s,ingredients:O,groups:y,images:l})}).then(function(e){if(a.setState(Object(U.a)({},u)),window.scrollTo(0,0),h(f),-1===b){v(+e);var t=S.encode(+e);E.push("/recipe/".concat(t))}else{var n=S.encode(b);E.push("/recipe/".concat(n))}}).catch(function(e){p("fail",g.failMessage),window.scrollTo(0,0),console.error(e)})}},a.onSubmit=a.onSubmit.bind(Object(x.a)(a)),a.onFieldChange=a.onFieldChange.bind(Object(x.a)(a));var n={notes:e.notes,name:e.name,size:e.size,groups:e.initialGroups,ingredients:e.initialIngredients,images:e.initialImages,submitError:!1,submitStatus:"",invalid:{name:!1,ingCount:!1}};return a.state=Object(U.a)({},n,{stateOnSubmit:n}),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){for(var e=this.state,t=e.name,a=e.size,i=e.notes,r=e.groups,c=e.ingredients,s=e.images,l=e.invalid,u=e.submitError,m=this.props,d=m.title,p=m.messages,g=m.t,h=m.screen,f=[],b=0;b<r.length;b++)f.push(o.a.createElement("div",{key:r[b].elemId},o.a.createElement(be,{groupId:b+1,onIngGroupUpdate:this.onIngGroupUpdate,onRemoveGroup:this.onRemoveGroup,ingredients:c[b],group:r[b],screen:h})));return o.a.createElement(n.Fragment,null,o.a.createElement("h1",{className:"title"},d),o.a.createElement(Re,{subtitle:g("common:recipeform.info")}),o.a.createElement("form",{id:"nr-form",onSubmit:this.onSubmit,autoComplete:"off"},o.a.createElement(pe,{onChange:this.onFieldChange,value:t,labelname:g("common:recipeform.name"),name:"name",id:"nr-name-input",invalid:l.name,validString:"a name is required!",onBlur:this.validate,required:!0}),o.a.createElement(pe,{onChange:this.onFieldChange,labelname:g("common:recipeform.size"),value:a,name:"size",id:"nr-size-input",info:g("common:recipeform.sizeDesc")}),o.a.createElement(pe,{onChange:this.onFieldChange,value:i,labelname:g("common:recipeform.notes"),name:"notes",id:"nr-recipenotes-input",textarea:!0}),o.a.createElement("fieldset",{className:"ingredients-fieldset"},o.a.createElement("legend",null,o.a.createElement(Re,{subtitle:g("common:recipeform.ing")})),o.a.createElement(ve,null),f,o.a.createElement("button",{className:"add-ing-group-button",type:"button",onClick:this.onAddGroup},o.a.createElement(K.Plus,null),g("common:recipeform.addIngGroup"))),o.a.createElement(Re,{subtitle:g("common:recipeform.images")}),o.a.createElement(_e,{images:s,onImageStateUpdate:this.updateImageState}),o.a.createElement(Re,null),o.a.createElement("input",{type:"submit",value:p.buttonAction}),u&&o.a.createElement("p",{className:"error-msg"},o.a.createElement(K.AlertCircle,null),"Please complete the required fields.")))}}]),t}(n.Component));Ae.defaultProps={initialIngredients:[[Object(U.a)({},L)]],initialGroups:[Object(U.a)({},z)],initialImages:[],notes:"",name:"",size:"",sortMethod:"update_date"};var Fe=Object(f.c)()(Object(D.g)(Ae)),xe={fetchRecipes:k,setNotification:I,setSelectedRecipe:C},Te=Object(c.b)(function(e){return e},xe)(Fe),Pe=function(e){function t(){return Object(u.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setSelectedRecipe)(-1)}},{key:"render",value:function(){var e=this.props.t,t={name:"",size:"",ingredients:[[Object(U.a)({},L)]],groups:[Object(U.a)({},z)],notes:"",invalid:{name:!1,ingCount:!1},images:[]},a={buttonAction:e("common:newrecipe.submit"),failMessage:e("common:newrecipe.fail"),successMessage:e("common:newrecipe.success")};return o.a.createElement(n.Fragment,null,o.a.createElement(Te,{initialFormState:t,initialIngredients:t.ingredients,title:e("common:newrecipe.title"),initialGroups:t.groups,notes:"",name:"",size:"",fetchUrl:"/createnewrecipe",messages:a}))}}]),t}(n.Component),De=Object(f.c)()(Pe),Ue={fetchRecipes:k,setSelectedRecipe:C},Le=Object(c.b)(function(e){return e},Ue)(De),ze=(a(667),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).state={form:{ingredients:[[Object(U.a)({},L)]],groups:[Object(U.a)({},z)],info:{name:"",size:"",notes:""},invalid:{name:!1,ingCount:!1},images:[]},loadingInfo:!0},a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.setSelectedRecipe,n=e.selectedId,o=e.history,i=e.loadingAuth,r=+S.decode(t.params.id);n!==r&&a(r),i||-1!==n&&this.fetchInfo(),r&&0!==r||-1!==n||o.push("/")}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.loadingAuth,n=t.selectedId;e.loadingAuth===a&&e.selectedId===n||a||-1!==n&&this.fetchInfo()}},{key:"fetchInfo",value:function(){var e=this,t=this.props.selectedId;this.setState({loadingInfo:!0},function(){w("/getrecipeinfo/".concat(t)).then(function(t){var a=t.groups;0===t.length&&(a=[Object(U.a)({},z)]);var n=t.ingredients,o=[];o.push([]);for(var i=0,r=0;r<n.length;r++)0!==r&&n[r].groupId!==n[r-1].groupId&&(o.push([]),i++),o[i].push(n[r]);0===n.length&&(o=[[Object(U.a)({},L)]]),e.setState({form:{groups:a,ingredients:o,images:t.images,groupCount:a.length,info:t.info},loadingInfo:!1,fetchError:!1})}).catch(function(){e.setState({fetchError:!0})})})}},{key:"render",value:function(){var e=this.state,t=e.form,a=e.loadingInfo,i=e.fetchError,r=this.props,c=r.selectedId,s=r.t,l={buttonAction:s("common:editrecipe.submit"),failMessage:s("common:editrecipe.fail"),successMessage:s("common:editrecipe.success")};return a?o.a.createElement("p",null,"Loading..."):i?o.a.createElement("p",null,"We're having trouble connecting to our server."):o.a.createElement(n.Fragment,null,o.a.createElement(Te,{initialFormState:t,title:s("common:editrecipe.title"),initialIngredients:t.ingredients,initialGroups:t.groups,initialImages:t.images,notes:t.info.notes,name:t.info.name,size:t.info.size,fetchUrl:"/updateRecipe/".concat(c),messages:l}))}}]),t}(n.Component)),Ge=Object(f.c)()(ze),He={fetchRecipes:k,setSelectedRecipe:C},Be=Object(c.b)(function(e){return e},He)(Ge),Qe=(a(668),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).deleteRecipe=function(e){var t=a.props,n=t.selectedId,o=t.fetchRecipes,i=t.sortMethod,r=t.history,c=t.setNotification;e.preventDefault(),w("/deleteRecipe/".concat(n),{method:"DELETE"}).then(function(){c("success","Successfully deleted recipe."),o(i),r.push("/")}).catch(function(e){console.error(e),c("fail","Failed to delete recipe. Please try again later.")})},a.deleteRecipe=a.deleteRecipe.bind(Object(x.a)(a)),a.state={deleteStatus:"",deleteMessage:""},a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match;(0,e.setSelectedRecipe)(+S.decode(t.params.id))}},{key:"render",value:function(){var e=this.props,t=e.selectedId,a=e.t,i=this.state,r=i.deleteStatus,c=i.deleteMessage;return o.a.createElement(n.Fragment,null,o.a.createElement(je,{status:r,dynamicMessage:c}),o.a.createElement("h1",{className:"title"},a("common:delete.title")),o.a.createElement("p",{className:"delete-description"},a("common:delete.confirm")),o.a.createElement("div",{className:"confirm-buttons-wrapper"},o.a.createElement("button",{type:"button",className:"confirm-buttons affirmative",onClick:this.deleteRecipe},a("common:delete.yes")),o.a.createElement("div",null,o.a.createElement(P.b,{to:"/recipe/".concat(S.encode(t)),className:"confirm-buttons cancel"},a("common:delete.cancel")))))}}]),t}(n.Component));Qe.defaultProps={sortMethod:"update_date"};var qe=Object(f.c)()(Object(D.g)(Qe)),Ve={setSelectedRecipe:C,fetchRecipes:k,setNotification:I},We=Object(c.b)(function(e){return e},Ve)(qe),Je=(a(669),function(e){function t(){return Object(u.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setSelectedRecipe)(-1)}},{key:"render",value:function(){var e=this.props.t;return o.a.createElement(n.Fragment,null,o.a.createElement(X,null),o.a.createElement("p",{className:"nsr-description"},e("common:message.noselected")))}}]),t}(n.Component)),Ke=Object(f.c)()(Je),Xe={setSelectedRecipe:C,fetchRecipes:k},Ye=Object(c.b)(function(e){return e},Xe)(Ke),$e=(a(129),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).state={hasError:!1},a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.hasError,t=this.props.children;return e?o.a.createElement(n.Fragment,null,o.a.createElement("h1",{className:"errorboundary-title"},"Sorry, something went wrong!"),o.a.createElement("p",{className:"errorboundary-message"},"We're having trouble loading your recipe at the moment.",o.a.createElement("br",null),"We're working on it!")):t}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),t}(n.Component)),Ze=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).state={hasError:!1},a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.hasError,t=this.props.children;return e?o.a.createElement(n.Fragment,null,o.a.createElement("p",{className:"errorboundary-message"},"Sorry, we're having trouble loading your recipes.")):t}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),t}(n.Component),et=(a(670),function(e){function t(){return Object(u.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.fetchRecipes,n=t.sortMethod,o=t.loadingAuth;e.loadingAuth!==o&&(o||a(n))}},{key:"renderMobile",value:function(){var e=this.props.notification;return o.a.createElement("div",{className:"recipe-everything-wrapper-mobile"},o.a.createElement(je,{status:e.status,message:e.message}),o.a.createElement(D.d,null,o.a.createElement(D.b,{exact:!0,path:"/",render:function(e){return o.a.createElement(Ze,null,o.a.createElement(le,e))}}),o.a.createElement(D.b,{exact:!0,path:"/addRecipe",component:Le}),o.a.createElement(D.b,{exact:!0,path:"/editRecipe/:id",component:Be}),o.a.createElement(D.b,{path:"/recipe/:id",render:function(e){return o.a.createElement($e,null,o.a.createElement(oe,e))}}),o.a.createElement(D.b,{path:"/deleteRecipe/:id",component:We})))}},{key:"render",value:function(){var e=this.props,t=e.notification;return"mobile"===e.screen?this.renderMobile():o.a.createElement("div",{className:"recipe-everything-wrapper"},o.a.createElement("div",{id:"recipe-list"},o.a.createElement(Ze,null,o.a.createElement(le,null))),o.a.createElement("div",{id:"recipe-info"},o.a.createElement(je,{status:t.status,message:t.message}),o.a.createElement(D.d,null,o.a.createElement(D.b,{exact:!0,path:"/addRecipe",component:Le}),o.a.createElement(D.b,{exact:!0,path:"/editRecipe/:id",component:Be}),o.a.createElement(D.b,{path:"/recipe/:id",render:function(e){return o.a.createElement($e,null,o.a.createElement(oe,e))}}),o.a.createElement(D.b,{path:"/deleteRecipe/:id",component:We}),o.a.createElement(D.b,{exact:!0,path:"/",component:Ye}))))}}]),t}(n.Component));et.defaultProps={fetchRecipes:null,sortMethod:"update_date"};var tt=et,at={fetchRecipes:k,setSelectedRecipe:C},nt=Object(c.b)(function(e){return e},at)(tt),ot=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).state={hasError:!1},a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.hasError,t=this.props.children;return e?o.a.createElement("div",{className:"apperrorboundary-wrapper"},o.a.createElement("h1",{className:"title"},"Sorry, we're having some technical difficulties right now."),o.a.createElement("p",{className:"errorboundary-message"},"We're working on it!")):t}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),t}(n.Component),it=function(e){function t(){return Object(u.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuthenticated,a=e.login;t||a()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isAuthenticated,a=e.history;t&&a.push("/")}},{key:"render",value:function(){return o.a.createElement("div",{id:"mff-lock-container"})}}]),t}(n.Component);it.defaultProps={};var rt={login:R},ct=Object(c.b)(function(e){return e},rt)(it),st=function(e){function t(){return Object(u.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.logout,a=e.history;t(),a.push("/")}},{key:"render",value:function(){return o.a.createElement("div",{id:"auth0-lock-wrapper-box"})}}]),t}(n.Component),lt={logout:function(){return function(e){e({type:"LOGOUT_SUCCESS"}),y.signOut()}}},ut=Object(c.b)(function(e){return e},lt)(st),mt=function(e){function t(){return Object(u.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuthenticated,a=e.signup;t||a()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isAuthenticated,a=e.history;t&&a.push("/")}},{key:"render",value:function(){return o.a.createElement("div",{id:"mff-lock-container"})}}]),t}(n.Component);mt.defaultProps={};var dt={signup:function(){return function(e){e({type:"AUTH_START"}),y.signUp().then(function(t){e(_(t))}).catch(function(e){M(e)})}}},pt=Object(c.b)(function(e){return e},dt)(mt),gt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).onLangSelect=a.onLangSelect.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"onLangSelect",value:function(e){var t=this.props.i18n;"en"===e.target.value?(t.changeLanguage("en"),document.documentElement.setAttribute("lang","en")):"ja"===e.target.value&&t.changeLanguage("ja",function(){document.documentElement.setAttribute("lang","ja")})}},{key:"render",value:function(){var e=this.props.i18n;return o.a.createElement(n.Fragment,null,o.a.createElement("select",{className:"select-lang-dropdown",value:e.language,onChange:this.onLangSelect},o.a.createElement("option",{value:"en"},"English"),o.a.createElement("option",{value:"ja"},"Japanese")))}}]),t}(n.Component),ht=Object(f.c)()(gt),ft=(a(671),function(e){function t(){return Object(u.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isAuthenticated,a=e.history;t&&a.push("/")}},{key:"render",value:function(){var e=this.props,t=e.t,a=e.screen;return o.a.createElement("div",{id:"welcome"},o.a.createElement("header",{className:"welcome-header"},o.a.createElement(P.b,{className:"w-main-title-link",to:"/welcome"},t("common:welcome.app-name")),o.a.createElement(ht,null)),o.a.createElement("section",{className:"section-1"},o.a.createElement("div",{className:"section-title-wrapper"},o.a.createElement("h1",{className:"section-title"},t("common:welcome.big-title")),o.a.createElement("p",{className:"section-caption"},t("common:welcome.big-desc"))),o.a.createElement("div",{className:"links-row"},o.a.createElement(P.b,{className:"welcome-action-unfilled",to:"/signup"},t("common:header.signup")),o.a.createElement(P.b,{className:"welcome-action-unfilled",to:"/login"},t("common:header.login"))),"mobile"!==a&&o.a.createElement("img",{className:"kitchen-table-image",src:"/api/welcomeimages/kitchen_table_1x.png",srcSet:"/api/welcomeimages/kitchen_table_1x.png 1x, /api/welcomeimages/kitchen_table_2x.png 2x",alt:"kitchen table illustration"}),"mobile"!==a&&o.a.createElement("img",{className:"cookie-desktop-image",src:"/api/welcomeimages/desktop_cookie_1x.png",srcSet:"/api/welcomeimages/desktop_cookie_1x.png 1x, /api/welcomeimages/desktop_cookie_2x.png 2x",alt:"monkey chef illustration"}),"mobile"===a&&o.a.createElement("img",{className:"cookie-mobile-image",src:"/api/welcomeimages/mobile_cookie_1x.png",srcSet:"/api/welcomeimages/mobile_cookie_1x.png 1x, /api/welcomeimages/mobile_cookie_2x.png 2x",alt:"monkey chef illustration"}),"mobile"!==a&&o.a.createElement("img",{className:"recipe-corner-image",src:"/api/welcomeimages/recipe_corner_1x.png",srcSet:"/api/welcomeimages/recipe_corner_1x.png 1x, /api/welcomeimages/recipe_corner_2x.png 2x",alt:"abstract recipe illustration"}),"mobile"!==a&&o.a.createElement("div",{className:"down-button-wrapper-wrapper"},o.a.createElement("p",{className:"down-button-desc"},t("common:welcome.scroll")),o.a.createElement("a",{href:"#section-2",className:"down-button-wrapper"},o.a.createElement(K.ChevronDown,null)))),o.a.createElement("section",{className:"section-2"},o.a.createElement("h1",{className:"section-title regular-section-title",id:"section-2"},t("common:welcome.features")),o.a.createElement("div",{className:"w-feature-row-wrapper"},o.a.createElement("div",{className:"w-feature-wrapper"},o.a.createElement("img",{className:"w-feature-image",src:"/api/welcomeimages/complexity_1x.png",srcSet:"/api/welcomeimages/complexity_1x.png 1x, /api/welcomeimages/complexity_2x.png 2x",alt:"ramen illustration"}),o.a.createElement("h3",{className:"w-feature-section-title"},t("common:welcome.complex-title")),o.a.createElement("p",{className:"w-feature-description"},t("common:welcome.complex-desc"))),o.a.createElement("div",{className:"w-feature-wrapper"},o.a.createElement("img",{className:"w-feature-image",src:"/api/welcomeimages/mobility_1x.png",srcSet:"/api/welcomeimages/mobility_1x.png 1x, /api/welcomeimages/mobility_2x.png 2x",alt:"pizza in single slice wrapper illustration"}),o.a.createElement("h3",{className:"w-feature-section-title"},t("common:welcome.mobile-title")),o.a.createElement("p",{className:"w-feature-description"},t("common:welcome.mobile-desc"))),o.a.createElement("div",{className:"w-feature-wrapper"},o.a.createElement("img",{className:"w-feature-image",src:"/api/welcomeimages/sortsearch_1x.png",srcSet:"/api/welcomeimages/sortsearch_1x.png 1x, /api/welcomeimages/sortsearch_2x.png 2x",alt:"cupcakes illustration"}),o.a.createElement("h3",{className:"w-feature-section-title"},t("common:welcome.ss-title")),o.a.createElement("p",{className:"w-feature-description"},t("common:welcome.ss-desc"))))),o.a.createElement("section",{className:"section-3"},o.a.createElement("h1",{className:"section-title regular-section-title",id:"section-2"},t("common:welcome.screenshots")),o.a.createElement("div",{className:"w-sshot-wrapper-wrapper"},o.a.createElement("div",{className:"w-sshot-wrapper"},o.a.createElement("img",{className:"w-sshot-image",src:"/api/welcomeimages/listview_1x.png",srcSet:"/api/welcomeimages/listview_1x.png 1x, /api/welcomeimages/listview_2x.png 2x",alt:"cupcakes illustration"}),o.a.createElement("div",{className:"w-sshot-info"},o.a.createElement("h3",{className:"w-sshot-title"},t("common:welcome.view-title")),o.a.createElement("p",{className:"w-sshot-desc"},t("common:welcome.view-desc")))),o.a.createElement("div",{className:"w-sshot-wrapper"},o.a.createElement("img",{className:"w-sshot-image",src:"/api/welcomeimages/editview_1x.png",srcSet:"/api/welcomeimages/editview_1x.png 1x, /api/welcomeimages/editview_2x.png 2x",alt:"cupcakes illustration"}),o.a.createElement("div",{className:"w-sshot-info"},o.a.createElement("h3",{className:"w-sshot-title"},t("common:welcome.edit-title")),o.a.createElement("p",{className:"w-sshot-desc"},t("common:welcome.edit-desc")))))),o.a.createElement("footer",{className:"welcome-footer"},o.a.createElement("img",{src:"/api/welcomeimages/github.svg",className:"footer-gh-logo",alt:"github logo"}),o.a.createElement("a",{href:"https://github.com/meguna/inthemoodforfood"},t("common:welcome.github")),o.a.createElement("p",null,t("common:welcome.cp"))))}}]),t}(n.Component));ft.defaultProps={};var bt={Welcome:ft},vt=Object(c.b)(function(e){return e},bt)(Object(f.c)()(ft)),Et=function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).props.i18n;return a.state={langVal:n.language,fieldVal:"",errorStatus:{error:!1,message:"",status:""}},a.handlePassChange=a.handlePassChange.bind(Object(x.a)(a)),a.closeModal=a.closeModal.bind(Object(x.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(x.a)(a)),a.onLangSelect=a.onLangSelect.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"onLangSelect",value:function(e){var t=this.props.i18n;this.setState({langVal:e.target.value}),"en"===e.target.value?(t.changeLanguage("en"),document.documentElement.setAttribute("lang","en")):"en"===e.target.value&&(t.changeLanguage("ja"),document.documentElement.setAttribute("lang","ja"))}},{key:"handlePassChange",value:function(e){this.setState({fieldVal:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this,a=this.props,n=a.fieldParamName,o=a.toggleModal,i=a.t,r=this.state,c=r.fieldVal,s=r.langVal;e.preventDefault();var l=Object(me.a)({},n,c);"language"===n&&(l={nickname:s}),y.patchUserData(l).then(function(){"language"===n&&window.location.reload(),o(!0)}).catch(function(e){console.error(e),t.setState({errorStatus:{error:!0,message:i("common:error.general"),status:"fail"}})})}},{key:"closeModal",value:function(){(0,this.props.toggleModal)()}},{key:"render",value:function(){var e=this.state,t=e.fieldVal,a=e.errorStatus,n=e.langVal,i=this.props,r=i.desc,c=i.title,s=i.t,l=null;return l="language"===i.fieldParamName?o.a.createElement("select",{className:"select-lang-dropdown-settings modal-input",defaultValue:n,onChange:this.onLangSelect},o.a.createElement("option",{value:"en"},"English"),o.a.createElement("option",{value:"ja"},"Japanese")):o.a.createElement("input",{className:"modal-input",type:"text",placeholder:"email",value:t,onChange:this.handlePassChange}),o.a.createElement("div",{className:"check-pass-modal"},a.error&&o.a.createElement(je,{status:a.status,message:a.message}),o.a.createElement("button",{className:"close-modal-button",type:"button",onClick:this.closeModal,onKeyDown:this.closeModal,tabIndex:"-1"},o.a.createElement(K.X,null)),o.a.createElement("h2",null,c),o.a.createElement("p",null,r),o.a.createElement("form",{onSubmit:this.handleSubmit},l,o.a.createElement("input",{type:"submit",className:"modal-submit",value:s("common:actions.submit")})))}}]),t}(n.Component);Et.defaultProps={desc:""};var Ot=Object(f.c)()(Et),yt=(a(672),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).state={name:"",email:"",language:"",isModalOpen:!1,modal:{title:"",fieldParamName:""}},a.toggleModal=a.toggleModal.bind(Object(x.a)(a)),a.setEmailModal=a.setEmailModal.bind(Object(x.a)(a)),a.setNameModal=a.setNameModal.bind(Object(x.a)(a)),a.setLangModal=a.setLangModal.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setSelectedRecipe,a=e.loadingAuth;if(t(-1),!a){var n=y.getProfile();console.log(n),this.setState({name:n.name,email:n.email,language:n.nickname})}}},{key:"componentDidUpdate",value:function(e){var t=this.props.loadingAuth;if(e.loadingAuth!==t){var a=y.getProfile();t||this.setState({name:a.name,email:a.email,language:a.nickname})}}},{key:"setProfile",value:function(){var e=y.getProfile();this.setState({name:e.name,email:e.email,language:e.nickname})}},{key:"setEmailModal",value:function(){var e=this,t=this.props.t;this.setState({modal:{title:t("common:account.emailchange"),fieldParamName:"email"}},function(){e.toggleModal()})}},{key:"setNameModal",value:function(){var e=this,t=this.props.t;this.setState({modal:{title:t("common:account.namechange"),fieldParamName:"name"}},function(){e.toggleModal()})}},{key:"setLangModal",value:function(){var e=this,t=this.props.t;this.setState({modal:{title:t("common:account.langchange"),fieldParamName:"language"}},function(){e.toggleModal()})}},{key:"toggleModal",value:function(e){this.setState(function(e){return{isModalOpen:!e.isModalOpen}}),e&&this.setProfile()}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.language,i=e.isModalOpen,r=e.modal,c=this.props.t,s="";return"en"===n?s="English":"ja"===n&&(s="\u65e5\u672c\u8a9e"),o.a.createElement("div",{id:"profile-page-wrapper",className:i?"modal-open-bkgd":""},i&&o.a.createElement(Ot,{toggleModal:this.toggleModal,fieldParamName:r.fieldParamName,title:r.title}),o.a.createElement("h1",{className:"title"},c("common:account.title")),o.a.createElement("div",{className:"account-info-group"},o.a.createElement("p",{className:"account-info-label"},c("common:account.language")),o.a.createElement("p",{className:"account-info-desc"},s),o.a.createElement("input",{className:"account-change-button",type:"button",value:c("common:account.change"),onClick:this.setLangModal})),o.a.createElement("div",{className:"account-info-group"},o.a.createElement("p",{className:"account-info-label"},c("common:account.name")),o.a.createElement("p",{className:"account-info-desc"},t),o.a.createElement("input",{className:"account-change-button",type:"button",value:c("common:account.change"),onClick:this.setNameModal})),o.a.createElement("div",{className:"account-info-group"},o.a.createElement("p",{className:"account-info-label"},c("common:account.email")),o.a.createElement("p",{className:"account-info-desc"},a),o.a.createElement("input",{className:"account-change-button",type:"button",value:c("common:account.change"),onClick:this.setEmailModal})),o.a.createElement("div",{className:"account-info-group"},o.a.createElement("p",{className:"account-info-label"},c("common:account.password")),o.a.createElement("input",{className:"account-change-button",type:"button",value:c("common:account.reset"),onClick:function(){y.resetPassword(a)}})))}}]),t}(n.Component)),jt=Object(f.c)()(yt),wt={setSelectedRecipe:C,fetchRecipes:k,setNotification:I},St=Object(c.b)(function(e){return e},wt)(jt),kt=(a(673),function(e){function t(){return Object(u.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.loadingAuth,n=e.t;return a?null:t?o.a.createElement("div",{className:"auth-button-wrapper"},o.a.createElement(P.b,{className:"auth-button-link",to:"/account"},n("common:header.account")),o.a.createElement(P.b,{className:"auth-button-link",to:"/logout"},n("common:header.logout"))):o.a.createElement("div",{className:"auth-button-wrapper"},o.a.createElement(P.b,{className:"auth-button-link",to:"/login"},n("common:header.login")))}}]),t}(n.Component)),Nt=Object(c.b)(function(e){return e})(Object(f.c)()(kt)),Ct=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).state={isMenuOpen:!1},a.toggleMenu=a.toggleMenu.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"toggleMenu",value:function(){this.setState(function(e){return{isMenuOpen:!e.isMenuOpen}})}},{key:"renderMenuItems",value:function(){var e=this.props,t=e.loadingAuth,a=e.isAuthenticated,i=e.t;return t?null:a?o.a.createElement(n.Fragment,null,o.a.createElement(P.b,{className:"menu-item",to:"/account",onClick:this.toggleMenu},i("common:header.account")),o.a.createElement(P.b,{className:"menu-item",to:"/logout",onClick:this.toggleMenu},i("common:header.logout"))):o.a.createElement("div",{className:"menu-items-wrapper"},o.a.createElement(P.b,{className:"menu-item",to:"/login",onClick:this.toggleMenu},i("common:header.login")))}},{key:"renderMobile",value:function(){var e=this.state.isMenuOpen;return o.a.createElement("div",{className:"mobile-header-wrapper"},o.a.createElement("header",{className:"app-main-header"},o.a.createElement(P.b,{className:"app-main-header-title",to:"/"},"Foodnotes"),o.a.createElement("button",{type:"button",onClick:this.toggleMenu,onKeyDown:this.toggleMenu,tabIndex:"-1"},!e&&o.a.createElement(K.Menu,{color:"white"}),e&&o.a.createElement(K.X,{color:"white"}))),e&&this.renderMenuItems())}},{key:"render",value:function(){var e=this.props,t=e.location,a=e.screen;return"/welcome"===t.pathname||"logout"===t.pathname?null:"mobile"===a?this.renderMobile():o.a.createElement(n.Fragment,null,o.a.createElement("header",{className:"app-main-header"},o.a.createElement(P.b,{className:"app-main-header-title",to:"/"},"Foodnotes"),o.a.createElement(Nt,null)))}}]),t}(n.Component),It=Object(c.b)(function(e){return e})(Object(f.c)()(Object(D.g)(Ct))),_t=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleResize=a.handleResize.bind(Object(x.a)(a)),a}return Object(T.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.checkAuthStatus,n=t.fetchRecipes,o=t.sortMethod;a(function(){var t=e.props.i18n;n(o);var a=y.getProfile().nickname;t.changeLanguage(a)}),this.handleResize(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){var e=this.props.setScreen;window.innerWidth<768?e("mobile"):e("desktop")}},{key:"render",value:function(){var e=this.props,t=e.loadingAuth,a=e.isAuthenticated;return t?null:o.a.createElement("div",{className:"app"},o.a.createElement(P.a,null,!t&&!a&&o.a.createElement(D.a,{to:"/welcome"}),o.a.createElement(It,null),o.a.createElement(D.d,null,o.a.createElement(D.b,{exact:!0,path:"/signup",component:pt}),o.a.createElement(D.b,{exact:!0,path:"/login",component:ct}),o.a.createElement(D.b,{exact:!0,path:"/logout",component:ut}),o.a.createElement(D.b,{exact:!0,path:"/welcome",component:vt}),o.a.createElement(D.b,{exact:!0,path:"/account",component:St}),o.a.createElement(D.b,{path:"/",render:function(e){return o.a.createElement(ot,null,o.a.createElement(nt,e))}}))))}}]),t}(o.a.Component),Mt=Object(f.c)("common")(_t),Rt={login:R,checkAuthStatus:function(e){return function(t){t({type:"AUTH_START"}),y.getToken().then(function(a){t(_(a)),e()}).catch(function(e){t(M(e)),R()})}},fetchRecipes:k,setScreen:function(e){return{type:"SET_SCREEN",payload:e}}},At=Object(c.b)(function(e){return e},Rt)(Mt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ft={recipes:[],selectedId:-1,error:null,loading:!1,listOffset:0,sortMethod:"update_date",notification:{message:"",status:""},loadingAuth:!0,isAuthenticated:!1,profile:null,noMoreResults:!1,screen:"desktop"},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_RECIPES_START":return Object(U.a)({},e,{error:null,loading:!0});case"FETCH_RECIPES_SUCCESS":return Object(U.a)({},e,{recipes:Object(ue.a)(t.payload),error:null,loading:!1,listOffset:t.payload.length,noMoreResults:t.payload.length<5});case"FETCH_MORE_RECIPES_START":return Object(U.a)({},e,{error:null,loading:!0,sortMethod:t.payload});case"FETCH_MORE_RECIPES_SUCCESS":return Object(U.a)({},e,{recipes:[].concat(Object(ue.a)(e.recipes),Object(ue.a)(t.payload)),error:null,loading:!1,listOffset:e.recipes.length+t.payload.length,noMoreResults:t.payload.length<5});case"SET_SELECTED_RECIPE":return Object(U.a)({},e,{selectedId:t.payload});case"FETCH_QS_FAILURE":case"FETCH_RECIPES_FAILURE":case"FETCH_MORE_RECIPES_FAILURE":return console.error(t.payload),Object(U.a)({},e,{error:!0,loading:!1,loadingAuth:!1});case"FETCH_QS_START":return Object(U.a)({},e,{error:null,loading:!0,sortMethod:t.payload});case"FETCH_QS_SUCCESS":return Object(U.a)({},e,{recipes:Object(ue.a)(t.payload),error:null,loading:!1,listOffset:t.payload.length,noMoreResults:t.payload.length<5});case"FETCH_MORE_QS_SUCCESS":return Object(U.a)({},e,{recipes:[].concat(Object(ue.a)(e.recipes),Object(ue.a)(t.payload)),error:null,loading:!1,listOffset:e.recipes.length+t.payload.length,noMoreResults:t.payload.length<5});case"LOGIN_FAILURE":return Object(U.a)({},e,{error:!1,loading:!1,loadingAuth:!1,isAuthenticated:!1});case"SET_NOTIFICATION_DETAILS":return Object(U.a)({},e,{notification:{message:t.payloadMessage,status:t.payloadStatus}});case"AUTH_START":return Object(U.a)({},e,{loadingAuth:!0,error:null});case"AUTH_NOT_LOGGED_IN":return Object(U.a)({},e,{loadingAuth:!1});case"LOGIN_SUCCESS":return Object(U.a)({},e,{loadingAuth:!1,isAuthenticated:!0,error:null});case"LOGOUT_SUCCESS":return Object(U.a)({},e,{isAuthenticated:!1,error:null});case"SET_SCREEN":return"desktop"!==t.payload&&"mobile"!==t.payload?(console.error("invalid input"),e):Object(U.a)({},e,{screen:t.payload});default:return e}},Tt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c,Pt=Object(s.d)(xt,Tt(Object(s.a)(l.a)));r.a.render(o.a.createElement(c.a,{store:Pt},o.a.createElement(At,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[197,1,2]]]);
//# sourceMappingURL=main.fe1cdc90.chunk.js.map